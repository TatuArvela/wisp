"use strict";(globalThis.webpackChunk_tatuarvela_wisp=globalThis.webpackChunk_tatuarvela_wisp||[]).push([[774],{"./stories/Theming.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TestTheme:()=>TestTheme,ThemeSwitcher:()=>Theming_stories_ThemeSwitcher,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Theming_stories});var react=__webpack_require__("./node_modules/react/index.js"),Wisp=__webpack_require__("./src/Wisp.tsx"),ListBox=__webpack_require__("./src/controls/ListBox.tsx"),ThemeManagerContext=__webpack_require__("./src/themeManager/ThemeManagerContext.ts");var Window=__webpack_require__("./src/window/Window.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ThemeSwitcher=()=>{const{theme:currentTheme,themes,changeTheme}=function useThemeManager(){return react.useContext(ThemeManagerContext.r)}(),value=`${currentTheme.name} (Active)`,options=themes.map((theme=>`${theme.name}${theme.id===currentTheme.id?" (Active)":""}`));return(0,jsx_runtime.jsx)(Window.Z,{id:"THEME_SWITCHER",title:"Theme Switcher",isResizable:!1,isClosable:!1,isMaximizable:!1,height:58,children:(0,jsx_runtime.jsx)(ListBox.Z,{onChange:value=>{const newTheme=themes.find((theme=>theme.name===value));newTheme&&changeTheme(newTheme)},value,options})})};ThemeSwitcher.displayName="ThemeSwitcher";const elements_ThemeSwitcher=ThemeSwitcher;var AlertWindow=__webpack_require__("./src/window/AlertWindow.tsx"),theme=__webpack_require__("./src/themes/default/theme.ts"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js");const test_theme={id:"TEST",name:"Test Theme",window:{...{TitleBar:styled_components_browser_esm.iv`
  ${theme.Z.window.TitleBar}
  background: ${props=>props.isActive?"rgb(214,19,107)":"grey"};
  font-family: serif;
`},WindowContent:styled_components_browser_esm.iv`
  ${theme.Z.window.WindowContent}
  font-family: serif;
`,WindowElement:styled_components_browser_esm.iv`
  ${theme.Z.window.WindowElement}
  background: cyan;
  border-color: cyan;
  box-shadow: 0 0 0 1px white;
`}},Theming_stories={component:Wisp.Z,title:"Wisp/Theming"},Theming_stories_ThemeSwitcher={args:{themes:[theme.Z,test_theme],children:(0,jsx_runtime.jsx)(elements_ThemeSwitcher,{})}},TestTheme={args:{themes:[test_theme],enableVersionInfo:!1,children:(0,jsx_runtime.jsx)(AlertWindow.Z,{id:"1",title:"TEST",children:"TEEEST"})}};Theming_stories_ThemeSwitcher.parameters={...Theming_stories_ThemeSwitcher.parameters,docs:{...Theming_stories_ThemeSwitcher.parameters?.docs,source:{originalSource:"{\n  args: {\n    themes: [defaultTheme, testTheme],\n    children: <ThemeSwitcherComponent />\n  }\n}",...Theming_stories_ThemeSwitcher.parameters?.docs?.source}}},TestTheme.parameters={...TestTheme.parameters,docs:{...TestTheme.parameters?.docs,source:{originalSource:"{\n  args: {\n    themes: [testTheme],\n    enableVersionInfo: false,\n    children: <AlertWindow id={'1'} title={'TEST'}>\n        TEEEST\n      </AlertWindow>\n  }\n}",...TestTheme.parameters?.docs?.source}}};const __namedExportsOrder=["ThemeSwitcher","TestTheme"]},"./src/controls/AlertText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const AlertText=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div`
  ${props=>props.theme.controls.AlertText}
`,__WEBPACK_DEFAULT_EXPORT__=AlertText;try{AlertText.displayName="AlertText",AlertText.__docgenInfo={description:"",displayName:"AlertText",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/controls/AlertText.tsx#AlertText"]={docgenInfo:AlertText.__docgenInfo,name:"AlertText",path:"src/controls/AlertText.tsx#AlertText"})}catch(__react_docgen_typescript_loader_error){}},"./src/controls/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const ButtonWrapper=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.div`
  ${props=>props.theme.controls.ButtonWrapper}
`,ButtonElement=styled_components__WEBPACK_IMPORTED_MODULE_2__.ZP.button`
  ${props=>props.theme.controls.Button}
`,Button=_ref=>{let{width,height,...rest}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ButtonWrapper,{style:{width:`${width}px`,height:`${height}px`},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ButtonElement,{...rest})})};Button.displayName="Button";const __WEBPACK_DEFAULT_EXPORT__=Button;try{Button.displayName="Button",Button.__docgenInfo={description:"",displayName:"Button",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/controls/Button.tsx#Button"]={docgenInfo:Button.__docgenInfo,name:"Button",path:"src/controls/Button.tsx#Button"})}catch(__react_docgen_typescript_loader_error){}},"./src/controls/ControlWrapper.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const ControlWrapper=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div`
  ${props=>props.theme.controls.ControlWrapper}
`,__WEBPACK_DEFAULT_EXPORT__=ControlWrapper;try{ControlWrapper.displayName="ControlWrapper",ControlWrapper.__docgenInfo={description:"",displayName:"ControlWrapper",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLDivElement>"}},inlineLabel:{defaultValue:null,description:"",name:"inlineLabel",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/controls/ControlWrapper.tsx#ControlWrapper"]={docgenInfo:ControlWrapper.__docgenInfo,name:"ControlWrapper",path:"src/controls/ControlWrapper.tsx#ControlWrapper"})}catch(__react_docgen_typescript_loader_error){}},"./src/controls/ListBox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>controls_ListBox});var i,o,react=__webpack_require__("./node_modules/react/index.js"),use_disposables=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-disposables.js"),use_id=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-id.js"),use_iso_morphic_effect=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-iso-morphic-effect.js"),use_computed=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-computed.js"),use_sync_refs=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-sync-refs.js"),render=__webpack_require__("./node_modules/@headlessui/react/dist/utils/render.js"),match=__webpack_require__("./node_modules/@headlessui/react/dist/utils/match.js"),disposables=__webpack_require__("./node_modules/@headlessui/react/dist/utils/disposables.js"),keyboard=__webpack_require__("./node_modules/@headlessui/react/dist/components/keyboard.js"),calculate_active_index=__webpack_require__("./node_modules/@headlessui/react/dist/utils/calculate-active-index.js"),bugs=__webpack_require__("./node_modules/@headlessui/react/dist/utils/bugs.js"),focus_management=__webpack_require__("./node_modules/@headlessui/react/dist/utils/focus-management.js"),open_closed=__webpack_require__("./node_modules/@headlessui/react/dist/internal/open-closed.js"),use_resolve_button_type=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-resolve-button-type.js"),use_outside_click=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-outside-click.js"),internal_hidden=__webpack_require__("./node_modules/@headlessui/react/dist/internal/hidden.js"),utils_form=__webpack_require__("./node_modules/@headlessui/react/dist/utils/form.js"),owner=__webpack_require__("./node_modules/@headlessui/react/dist/utils/owner.js"),use_event=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-event.js"),use_controllable=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-controllable.js"),use_latest_value=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-latest-value.js"),use_tracked_pointer=__webpack_require__("./node_modules/@headlessui/react/dist/hooks/use-tracked-pointer.js"),Ue=((o=Ue||{})[o.Open=0]="Open",o[o.Closed=1]="Closed",o),Be=(o=>(o[o.Single=0]="Single",o[o.Multi=1]="Multi",o))(Be||{}),He=(o=>(o[o.Pointer=0]="Pointer",o[o.Other=1]="Other",o))(He||{}),Ge=((i=Ge||{})[i.OpenListbox=0]="OpenListbox",i[i.CloseListbox=1]="CloseListbox",i[i.GoToOption=2]="GoToOption",i[i.Search=3]="Search",i[i.ClearSearch=4]="ClearSearch",i[i.RegisterOption=5]="RegisterOption",i[i.UnregisterOption=6]="UnregisterOption",i[i.RegisterLabel=7]="RegisterLabel",i);function X(e,a=(o=>o)){let o=null!==e.activeOptionIndex?e.options[e.activeOptionIndex]:null,r=(0,focus_management.z2)(a(e.options.slice()),(t=>t.dataRef.current.domRef.current)),l=o?r.indexOf(o):null;return-1===l&&(l=null),{options:r,activeOptionIndex:l}}let Ne={1:e=>e.dataRef.current.disabled||1===e.listboxState?e:{...e,activeOptionIndex:null,listboxState:1},0(e){if(e.dataRef.current.disabled||0===e.listboxState)return e;let a=e.activeOptionIndex,{isSelected:o}=e.dataRef.current,r=e.options.findIndex((l=>o(l.dataRef.current.value)));return-1!==r&&(a=r),{...e,listboxState:0,activeOptionIndex:a}},2(e,a){var l;if(e.dataRef.current.disabled||1===e.listboxState)return e;let o=X(e),r=(0,calculate_active_index.d)(a,{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:t=>t.id,resolveDisabled:t=>t.dataRef.current.disabled});return{...e,...o,searchQuery:"",activeOptionIndex:r,activationTrigger:null!=(l=a.trigger)?l:1}},3:(e,a)=>{if(e.dataRef.current.disabled||1===e.listboxState)return e;let r=""!==e.searchQuery?0:1,l=e.searchQuery+a.value.toLowerCase(),p=(null!==e.activeOptionIndex?e.options.slice(e.activeOptionIndex+r).concat(e.options.slice(0,e.activeOptionIndex+r)):e.options).find((i=>{var b;return!i.dataRef.current.disabled&&(null==(b=i.dataRef.current.textValue)?void 0:b.startsWith(l))})),u=p?e.options.indexOf(p):-1;return-1===u||u===e.activeOptionIndex?{...e,searchQuery:l}:{...e,searchQuery:l,activeOptionIndex:u,activationTrigger:1}},4:e=>e.dataRef.current.disabled||1===e.listboxState||""===e.searchQuery?e:{...e,searchQuery:""},5:(e,a)=>{let o={id:a.id,dataRef:a.dataRef},r=X(e,(l=>[...l,o]));return null===e.activeOptionIndex&&e.dataRef.current.isSelected(a.dataRef.current.value)&&(r.activeOptionIndex=r.options.indexOf(o)),{...e,...r}},6:(e,a)=>{let o=X(e,(r=>{let l=r.findIndex((t=>t.id===a.id));return-1!==l&&r.splice(l,1),r}));return{...e,...o,activationTrigger:1}},7:(e,a)=>({...e,labelId:a.id})},$=(0,react.createContext)(null);function U(e){let a=(0,react.useContext)($);if(null===a){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,U),o}return a}$.displayName="ListboxActionsContext";let z=(0,react.createContext)(null);function B(e){let a=(0,react.useContext)(z);if(null===a){let o=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,B),o}return a}function je(e,a){return(0,match.E)(a.type,Ne,e,a)}z.displayName="ListboxDataContext";let Ve=react.Fragment;let Je=render.AN.RenderStrategy|render.AN.Static;let et=(0,render.yV)((function Ke(e,a){let{value:o,defaultValue:r,form:l,name:t,onChange:p,by:u=((s,d)=>s===d),disabled:i=!1,horizontal:b=!1,multiple:R=!1,...m}=e;const P=b?"horizontal":"vertical";let E=(0,use_sync_refs.T)(a),[L=(R?[]:void 0),v]=(0,use_controllable.q)(o,p,r),[c,n]=(0,react.useReducer)(je,{dataRef:(0,react.createRef)(),listboxState:1,options:[],searchQuery:"",labelId:null,activeOptionIndex:null,activationTrigger:1}),x=(0,react.useRef)({static:!1,hold:!1}),h=(0,react.useRef)(null),Q=(0,react.useRef)(null),J=(0,react.useRef)(null),y=(0,use_event.z)("string"==typeof u?(s,d)=>{let O=u;return(null==s?void 0:s[O])===(null==d?void 0:d[O])}:u),S=(0,react.useCallback)((s=>(0,match.E)(T.mode,{1:()=>L.some((d=>y(d,s))),0:()=>y(L,s)})),[L]),T=(0,react.useMemo)((()=>({...c,value:L,disabled:i,mode:R?1:0,orientation:P,compare:y,isSelected:S,optionsPropsRef:x,labelRef:h,buttonRef:Q,optionsRef:J})),[L,i,R,c]);(0,use_iso_morphic_effect.e)((()=>{c.dataRef.current=T}),[T]),(0,use_outside_click.O)([T.buttonRef,T.optionsRef],((s,d)=>{var O;n({type:1}),(0,focus_management.sP)(d,focus_management.tJ.Loose)||(s.preventDefault(),null==(O=T.buttonRef.current)||O.focus())}),0===T.listboxState);let ne=(0,react.useMemo)((()=>({open:0===T.listboxState,disabled:i,value:L})),[T,i,L]),ie=(0,use_event.z)((s=>{let d=T.options.find((O=>O.id===s));d&&F(d.dataRef.current.value)})),re=(0,use_event.z)((()=>{if(null!==T.activeOptionIndex){let{dataRef:s,id:d}=T.options[T.activeOptionIndex];F(s.current.value),n({type:2,focus:calculate_active_index.T.Specific,id:d})}})),ae=(0,use_event.z)((()=>n({type:0}))),le=(0,use_event.z)((()=>n({type:1}))),se=(0,use_event.z)(((s,d,O)=>s===calculate_active_index.T.Specific?n({type:2,focus:calculate_active_index.T.Specific,id:d,trigger:O}):n({type:2,focus:s,trigger:O}))),pe=(0,use_event.z)(((s,d)=>(n({type:5,id:s,dataRef:d}),()=>n({type:6,id:s})))),ue=(0,use_event.z)((s=>(n({type:7,id:s}),()=>n({type:7,id:null})))),F=(0,use_event.z)((s=>(0,match.E)(T.mode,{0:()=>null==v?void 0:v(s),1(){let d=T.value.slice(),O=d.findIndex((M=>y(M,s)));return-1===O?d.push(s):d.splice(O,1),null==v?void 0:v(d)}}))),de=(0,use_event.z)((s=>n({type:3,value:s}))),ce=(0,use_event.z)((()=>n({type:4}))),fe=(0,react.useMemo)((()=>({onChange:F,registerOption:pe,registerLabel:ue,goToOption:se,closeListbox:le,openListbox:ae,selectActiveOption:re,selectOption:ie,search:de,clearSearch:ce})),[]),Te={ref:E},H=(0,react.useRef)(null),be=(0,use_disposables.G)();return(0,react.useEffect)((()=>{H.current&&void 0!==r&&be.addEventListener(H.current,"reset",(()=>{F(r)}))}),[H,F]),react.createElement($.Provider,{value:fe},react.createElement(z.Provider,{value:T},react.createElement(open_closed.up,{value:(0,match.E)(T.listboxState,{0:open_closed.ZM.Open,1:open_closed.ZM.Closed})},null!=t&&null!=L&&(0,utils_form.t)({[t]:L}).map((([s,d],O)=>react.createElement(internal_hidden._,{features:internal_hidden.A.Hidden,ref:0===O?M=>{var q;H.current=null!=(q=null==M?void 0:M.closest("form"))?q:null}:void 0,...(0,render.oA)({key:s,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:l,name:s,value:d})}))),(0,render.sY)({ourProps:Te,theirProps:m,slot:ne,defaultTag:Ve,name:"Listbox"}))))})),tt=(0,render.yV)((function We(e,a){var v;let o=(0,use_id.M)(),{id:r=`headlessui-listbox-button-${o}`,...l}=e,t=B("Listbox.Button"),p=U("Listbox.Button"),u=(0,use_sync_refs.T)(t.buttonRef,a),i=(0,use_disposables.G)(),b=(0,use_event.z)((c=>{switch(c.key){case keyboard.R.Space:case keyboard.R.Enter:case keyboard.R.ArrowDown:c.preventDefault(),p.openListbox(),i.nextFrame((()=>{t.value||p.goToOption(calculate_active_index.T.First)}));break;case keyboard.R.ArrowUp:c.preventDefault(),p.openListbox(),i.nextFrame((()=>{t.value||p.goToOption(calculate_active_index.T.Last)}))}})),R=(0,use_event.z)((c=>{if(c.key===keyboard.R.Space)c.preventDefault()})),m=(0,use_event.z)((c=>{if((0,bugs.P)(c.currentTarget))return c.preventDefault();0===t.listboxState?(p.closeListbox(),i.nextFrame((()=>{var n;return null==(n=t.buttonRef.current)?void 0:n.focus({preventScroll:!0})}))):(c.preventDefault(),p.openListbox())})),P=(0,use_computed.v)((()=>{if(t.labelId)return[t.labelId,r].join(" ")}),[t.labelId,r]),E=(0,react.useMemo)((()=>({open:0===t.listboxState,disabled:t.disabled,value:t.value})),[t]),L={ref:u,id:r,type:(0,use_resolve_button_type.f)(e,t.buttonRef),"aria-haspopup":"listbox","aria-controls":null==(v=t.optionsRef.current)?void 0:v.id,"aria-expanded":t.disabled?void 0:0===t.listboxState,"aria-labelledby":P,disabled:t.disabled,onKeyDown:b,onKeyUp:R,onClick:m};return(0,render.sY)({ourProps:L,theirProps:l,slot:E,defaultTag:"button",name:"Listbox.Button"})})),ot=(0,render.yV)((function $e(e,a){let o=(0,use_id.M)(),{id:r=`headlessui-listbox-label-${o}`,...l}=e,t=B("Listbox.Label"),p=U("Listbox.Label"),u=(0,use_sync_refs.T)(t.labelRef,a);(0,use_iso_morphic_effect.e)((()=>p.registerLabel(r)),[r]);let i=(0,use_event.z)((()=>{var m;return null==(m=t.buttonRef.current)?void 0:m.focus({preventScroll:!0})})),b=(0,react.useMemo)((()=>({open:0===t.listboxState,disabled:t.disabled})),[t]);return(0,render.sY)({ourProps:{ref:u,id:r,onClick:i},theirProps:l,slot:b,defaultTag:"label",name:"Listbox.Label"})})),nt=(0,render.yV)((function qe(e,a){var c;let o=(0,use_id.M)(),{id:r=`headlessui-listbox-options-${o}`,...l}=e,t=B("Listbox.Options"),p=U("Listbox.Options"),u=(0,use_sync_refs.T)(t.optionsRef,a),i=(0,use_disposables.G)(),b=(0,use_disposables.G)(),R=(0,open_closed.oJ)(),m=null!==R?(R&open_closed.ZM.Open)===open_closed.ZM.Open:0===t.listboxState;(0,react.useEffect)((()=>{var x;let n=t.optionsRef.current;n&&0===t.listboxState&&n!==(null==(x=(0,owner.r)(n))?void 0:x.activeElement)&&n.focus({preventScroll:!0})}),[t.listboxState,t.optionsRef]);let P=(0,use_event.z)((n=>{switch(b.dispose(),n.key){case keyboard.R.Space:if(""!==t.searchQuery)return n.preventDefault(),n.stopPropagation(),p.search(n.key);case keyboard.R.Enter:if(n.preventDefault(),n.stopPropagation(),null!==t.activeOptionIndex){let{dataRef:x}=t.options[t.activeOptionIndex];p.onChange(x.current.value)}0===t.mode&&(p.closeListbox(),(0,disposables.k)().nextFrame((()=>{var x;return null==(x=t.buttonRef.current)?void 0:x.focus({preventScroll:!0})})));break;case(0,match.E)(t.orientation,{vertical:keyboard.R.ArrowDown,horizontal:keyboard.R.ArrowRight}):return n.preventDefault(),n.stopPropagation(),p.goToOption(calculate_active_index.T.Next);case(0,match.E)(t.orientation,{vertical:keyboard.R.ArrowUp,horizontal:keyboard.R.ArrowLeft}):return n.preventDefault(),n.stopPropagation(),p.goToOption(calculate_active_index.T.Previous);case keyboard.R.Home:case keyboard.R.PageUp:return n.preventDefault(),n.stopPropagation(),p.goToOption(calculate_active_index.T.First);case keyboard.R.End:case keyboard.R.PageDown:return n.preventDefault(),n.stopPropagation(),p.goToOption(calculate_active_index.T.Last);case keyboard.R.Escape:return n.preventDefault(),n.stopPropagation(),p.closeListbox(),i.nextFrame((()=>{var x;return null==(x=t.buttonRef.current)?void 0:x.focus({preventScroll:!0})}));case keyboard.R.Tab:n.preventDefault(),n.stopPropagation();break;default:1===n.key.length&&(p.search(n.key),b.setTimeout((()=>p.clearSearch()),350))}})),E=(0,use_computed.v)((()=>{var n,x,h;return null!=(h=null==(n=t.labelRef.current)?void 0:n.id)?h:null==(x=t.buttonRef.current)?void 0:x.id}),[t.labelRef.current,t.buttonRef.current]),L=(0,react.useMemo)((()=>({open:0===t.listboxState})),[t]),v={"aria-activedescendant":null===t.activeOptionIndex||null==(c=t.options[t.activeOptionIndex])?void 0:c.id,"aria-multiselectable":1===t.mode||void 0,"aria-labelledby":E,"aria-orientation":t.orientation,id:r,onKeyDown:P,role:"listbox",tabIndex:0,ref:u};return(0,render.sY)({ourProps:v,theirProps:l,slot:L,defaultTag:"ul",features:Je,visible:m,name:"Listbox.Options"})})),it=(0,render.yV)((function Ze(e,a){let o=(0,use_id.M)(),{id:r=`headlessui-listbox-option-${o}`,disabled:l=!1,value:t,...p}=e,u=B("Listbox.Option"),i=U("Listbox.Option"),b=null!==u.activeOptionIndex&&u.options[u.activeOptionIndex].id===r,R=u.isSelected(t),m=(0,react.useRef)(null),P=(0,use_latest_value.E)({disabled:l,value:t,domRef:m,get textValue(){var y,S;return null==(S=null==(y=m.current)?void 0:y.textContent)?void 0:S.toLowerCase()}}),E=(0,use_sync_refs.T)(a,m);(0,use_iso_morphic_effect.e)((()=>{if(0!==u.listboxState||!b||0===u.activationTrigger)return;let y=(0,disposables.k)();return y.requestAnimationFrame((()=>{var S,T;null==(T=null==(S=m.current)?void 0:S.scrollIntoView)||T.call(S,{block:"nearest"})})),y.dispose}),[m,b,u.listboxState,u.activationTrigger,u.activeOptionIndex]),(0,use_iso_morphic_effect.e)((()=>i.registerOption(r,P)),[P,r]);let L=(0,use_event.z)((y=>{if(l)return y.preventDefault();i.onChange(t),0===u.mode&&(i.closeListbox(),(0,disposables.k)().nextFrame((()=>{var S;return null==(S=u.buttonRef.current)?void 0:S.focus({preventScroll:!0})})))})),v=(0,use_event.z)((()=>{if(l)return i.goToOption(calculate_active_index.T.Nothing);i.goToOption(calculate_active_index.T.Specific,r)})),c=(0,use_tracked_pointer.g)(),n=(0,use_event.z)((y=>c.update(y))),x=(0,use_event.z)((y=>{c.wasMoved(y)&&(l||b||i.goToOption(calculate_active_index.T.Specific,r,0))})),h=(0,use_event.z)((y=>{c.wasMoved(y)&&(l||b&&i.goToOption(calculate_active_index.T.Nothing))})),Q=(0,react.useMemo)((()=>({active:b,selected:R,disabled:l})),[b,R,l]);return(0,render.sY)({ourProps:{id:r,ref:E,role:"option",tabIndex:!0===l?void 0:-1,"aria-disabled":!0===l||void 0,"aria-selected":R,disabled:void 0,onClick:L,onFocus:v,onPointerEnter:n,onMouseEnter:n,onPointerMove:x,onMouseMove:x,onPointerLeave:h,onMouseLeave:h},theirProps:p,slot:Q,defaultTag:"li",name:"Listbox.Option"})})),Ht=Object.assign(et,{Button:tt,Label:ot,Options:nt,Option:it});var PortalCompat=__webpack_require__("./node_modules/react-portal/es/PortalCompat.js"),styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),WindowContext=__webpack_require__("./src/window/WindowContext.tsx"),ControlWrapper=__webpack_require__("./src/controls/ControlWrapper.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const ListBoxWrapper=(0,styled_components_browser_esm.ZP)(ControlWrapper.Z)`
  ${props=>props.theme.controls.ListBoxWrapper}
`,ListBoxLabel=styled_components_browser_esm.ZP.label`
  ${props=>props.theme.controls.ListBoxLabel}
`,ListBoxButton=(0,styled_components_browser_esm.ZP)(Ht.Button)`
  ${props=>props.theme.controls.ListBoxButton}
`,ListBoxOptions=(0,styled_components_browser_esm.ZP)(Ht.Options)`
  ${props=>props.theme.controls.ListBoxOptions}
`,ListBoxOption=(0,styled_components_browser_esm.ZP)(Ht.Option)`
  ${props=>props.theme.controls.ListBoxOption}
`,ListBox=_ref=>{let{disabled,inlineLabel,label,onChange,options,value}=_ref;const window=(0,WindowContext.zY)(),buttonRef=(0,react.useRef)(null),[sizes,setSizes]=(0,react.useState)({width:0,left:0,top:0});return(0,react.useEffect)((()=>{if(window){const rect=buttonRef?.current.getBoundingClientRect()??{width:0,left:0,top:0,height:0};setSizes({width:rect.width,left:rect.left,top:rect.top+rect.height})}}),[window]),(0,jsx_runtime.jsx)(Ht,{disabled,value:value??"",onChange,children:_ref2=>{let{open}=_ref2;return(0,jsx_runtime.jsxs)(ListBoxWrapper,{inlineLabel,children:[label&&(0,jsx_runtime.jsx)(ListBoxLabel,{disabled,children:label}),(0,jsx_runtime.jsx)(ListBoxButton,{disabled,ref:buttonRef,children:value}),(0,jsx_runtime.jsx)(PortalCompat.Z,{children:(0,jsx_runtime.jsx)(ListBoxOptions,{open,...sizes,children:options.map((option=>(0,jsx_runtime.jsx)(ListBoxOption,{value:option,children:option},option)))})})]})}})};ListBox.displayName="ListBox";const controls_ListBox=ListBox;try{ListBox.displayName="ListBox",ListBox.__docgenInfo={description:"",displayName:"ListBox",props:{disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value?: string) => void"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"string[]"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},inlineLabel:{defaultValue:null,description:"",name:"inlineLabel",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/controls/ListBox.tsx#ListBox"]={docgenInfo:ListBox.__docgenInfo,name:"ListBox",path:"src/controls/ListBox.tsx#ListBox"})}catch(__react_docgen_typescript_loader_error){}},"./src/window/AlertWindow.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>window_AlertWindow});__webpack_require__("./node_modules/react/index.js");var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Button=__webpack_require__("./src/controls/Button.tsx");const AlertButton=(0,styled_components_browser_esm.ZP)(Button.Z)`
  ${props=>props.theme.controls.AlertButton}
`,controls_AlertButton=AlertButton;try{AlertButton.displayName="AlertButton",AlertButton.__docgenInfo={description:"",displayName:"AlertButton",props:{width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/controls/AlertButton.tsx#AlertButton"]={docgenInfo:AlertButton.__docgenInfo,name:"AlertButton",path:"src/controls/AlertButton.tsx#AlertButton"})}catch(__react_docgen_typescript_loader_error){}var AlertText=__webpack_require__("./src/controls/AlertText.tsx"),Window=__webpack_require__("./src/window/Window.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const AlertWindow=_ref=>{let{id,title,buttonText="OK",onButtonClick,children}=_ref;return(0,jsx_runtime.jsxs)(Window.Z,{id,title,isMaximizable:!1,isMinimizable:!1,isResizable:!1,children:[(0,jsx_runtime.jsx)(AlertText.Z,{children}),(0,jsx_runtime.jsx)(controls_AlertButton,{onClick:onButtonClick,type:"button",children:buttonText})]})};AlertWindow.displayName="AlertWindow";const window_AlertWindow=AlertWindow;try{AlertWindow.displayName="AlertWindow",AlertWindow.__docgenInfo={description:"",displayName:"AlertWindow",props:{buttonText:{defaultValue:{value:"OK"},description:"",name:"buttonText",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},onButtonClick:{defaultValue:null,description:"",name:"onButtonClick",required:!1,type:{name:"() => void"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/window/AlertWindow.tsx#AlertWindow"]={docgenInfo:AlertWindow.__docgenInfo,name:"AlertWindow",path:"src/window/AlertWindow.tsx#AlertWindow"})}catch(__react_docgen_typescript_loader_error){}}}]);
//# sourceMappingURL=Theming-stories.35161dbb.iframe.bundle.js.map