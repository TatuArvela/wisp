{"version":3,"file":"573.8e3e01e4.iframe.bundle.js","mappings":";AAkBA;AAGA;AACA;AAGA;AACA;AAOA;ACvBA;AAqCA;ACzCA;AAaA;;;;;;ACJA;ACVA;AAGA;ACaA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AC3BA;AAGA;AACA;AAEA;AAMA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AChCA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AAGA;ACTA;AAEA;ACrBA;AAEA","sources":["webpack://@tatuarvela/wisp/./src/elements/Taskbar/TaskbarButton.tsx","webpack://@tatuarvela/wisp/./src/elements/Taskbar/Taskbar.tsx","webpack://@tatuarvela/wisp/./src/elements/VersionInfo.tsx","webpack://@tatuarvela/wisp/./src/windowManager/Viewport.tsx","webpack://@tatuarvela/wisp/./src/elements/Desktop.tsx","webpack://@tatuarvela/wisp/./src/window/components/ResizeBorder.tsx","webpack://@tatuarvela/wisp/./src/window/components/TitleBarButtons.tsx","webpack://@tatuarvela/wisp/./src/window/components/TitleBar.tsx","webpack://@tatuarvela/wisp/./src/window/components/WindowElement.tsx","webpack://@tatuarvela/wisp/./src/window/components/WindowElementContent.tsx"],"sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Icon } from '../../icons';\nimport { getIconFileForSize } from '../../icons/utils';\nimport { useThemeManager } from '../../themeManager/hooks';\n\nexport const TaskbarButtonThemeProperties = [\n  'TaskbarButtonElement',\n  'TaskbarButtonTitle',\n  'TaskbarButtonIconElement',\n] as const;\n\nexport interface TaskbarButtonElementProps {\n  active: boolean;\n}\n\nconst TaskbarButtonElement = styled.button<TaskbarButtonElementProps>`\n  ${(props) => props.theme.elements.TaskbarButtonElement}\n`;\n\nconst TaskbarButtonTitle = styled.div`\n  ${(props) => props.theme.elements.TaskbarButtonTitle}\n`;\n\nconst TaskbarButtonIconElement = styled.img`\n  ${(props) => props.theme.elements.TaskbarButtonIconElement}\n`;\n\nexport interface TaskbarButtonIconProps {\n  icon: string | Icon;\n}\n\nconst TaskbarButtonIcon = ({ icon }: TaskbarButtonIconProps) => {\n  const { theme } = useThemeManager();\n\n  const resolvedIcon = typeof icon === 'string' ? theme.icons[icon] : icon;\n  if (!resolvedIcon) {\n    return null;\n  }\n\n  const iconFile = getIconFileForSize(resolvedIcon);\n  return <TaskbarButtonIconElement src={iconFile} />;\n};\n\nexport interface TaskbarButtonProps {\n  active: boolean;\n  icon?: Icon;\n  title?: string;\n  onClick(): void;\n}\n\nexport const TaskbarButton = ({\n  active,\n  icon,\n  title,\n  onClick,\n}: TaskbarButtonProps) => {\n  return (\n    <TaskbarButtonElement type=\"button\" active={active} onClick={onClick}>\n      {icon !== undefined && <TaskbarButtonIcon icon={icon} />}\n      <TaskbarButtonTitle>{title}</TaskbarButtonTitle>\n    </TaskbarButtonElement>\n  );\n};\n\nexport default TaskbarButton;\n","import React, { useCallback, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport { useWindowManager } from '../../windowManager/hooks';\nimport { WindowType } from '../../windowManager/types';\nimport TaskbarButton from './TaskbarButton';\n\nexport const TaskbarThemeProperties = ['TaskbarElement'] as const;\n\nconst TaskbarElement = styled.div`\n  ${(props) => props.theme.elements.TaskbarElement}\n`;\n\nconst Taskbar = () => {\n  const { activeWindowId, windows, restoreWindow, setViewportWindowMargins } =\n    useWindowManager();\n  const taskbarRef = React.useRef<HTMLDivElement>();\n\n  const getTaskbarHeight = useCallback(\n    () => taskbarRef.current?.offsetHeight || 0,\n    [taskbarRef]\n  );\n\n  useEffect(() => {\n    setViewportWindowMargins({ bottom: getTaskbarHeight() });\n    return () => setViewportWindowMargins({ bottom: 0 });\n  }, [getTaskbarHeight, setViewportWindowMargins]);\n\n  const mapButtons = ([id, window]: [id: string, window: WindowType]) => (\n    <TaskbarButton\n      key={id}\n      onClick={() => restoreWindow(id)}\n      active={id === activeWindowId}\n      icon={window.icon}\n      title={window.title}\n    />\n  );\n\n  return (\n    <TaskbarElement ref={taskbarRef}>\n      {Array.from(windows.entries())\n        .filter(([id, window]) => window.showAsTask)\n        .map(mapButtons)}\n    </TaskbarElement>\n  );\n};\n\nexport default Taskbar;\n","import React from 'react';\nimport styled from 'styled-components';\n\nexport const VersionInfoThemeProperties = ['VersionInfoElement'] as const;\n\nconst VersionInfoElement = styled.p`\n  ${(props) => props.theme.elements.VersionInfoElement}\n`;\n\nexport const VersionInfo = () => {\n  const version =\n    process.env.PACKAGE_VERSION || process.env.STORYBOOK_PACKAGE_VERSION;\n\n  if (!version) {\n    return null;\n  }\n  return <VersionInfoElement>Wisp Version {version}</VersionInfoElement>;\n};\n\nexport default VersionInfo;\n","import React from 'react';\nimport styled from 'styled-components';\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nconst ViewportElement = styled.div`\n  box-sizing: border-box;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n`;\n\nconst Viewport = React.forwardRef<HTMLDivElement, Props>(\n  ({ children }: Props, ref) => (\n    <ViewportElement ref={ref}>{children}</ViewportElement>\n  )\n);\n\nexport default Viewport;\n","import styled from 'styled-components';\n\nexport const DesktopThemeProperties = ['Desktop'] as const;\n\nexport const Desktop = styled.div`\n  ${(props) => props.theme.elements.Desktop}\n`;\n\nexport default Desktop;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { Direction } from '../../windowManager/types';\n\nexport const ResizeBorderThemeProperties = [\n  'NResize',\n  'NEResize',\n  'EResize',\n  'SEResize',\n  'SResize',\n  'SWResize',\n  'WResize',\n  'NWResize',\n] as const;\n\ninterface ResizeBorderProps {\n  resize: (event: React.MouseEvent, direction: Direction) => void;\n}\n\nconst NResize = styled.div`\n  ${(props) => props.theme.window.NResize}\n`;\n\nconst NEResize = styled.div`\n  ${(props) => props.theme.window.NEResize}\n`;\n\nconst EResize = styled.div`\n  ${(props) => props.theme.window.EResize}\n`;\n\nconst SEResize = styled.div`\n  ${(props) => props.theme.window.SEResize}\n`;\n\nconst SResize = styled.div`\n  ${(props) => props.theme.window.SResize}\n`;\n\nconst SWResize = styled.div`\n  ${(props) => props.theme.window.SWResize}\n`;\n\nconst WResize = styled.div`\n  ${(props) => props.theme.window.WResize}\n`;\n\nconst NWResize = styled.div`\n  ${(props) => props.theme.window.NWResize}\n`;\n\nconst ResizeBorder = ({ resize }: ResizeBorderProps) => (\n  <>\n    <NResize onMouseDown={(e) => resize(e, Direction.N)} />\n    <EResize onMouseDown={(e) => resize(e, Direction.E)} />\n    <SResize onMouseDown={(e) => resize(e, Direction.S)} />\n    <WResize onMouseDown={(e) => resize(e, Direction.W)} />\n    <NEResize onMouseDown={(e) => resize(e, Direction.NE)} />\n    <SEResize onMouseDown={(e) => resize(e, Direction.SE)} />\n    <SWResize onMouseDown={(e) => resize(e, Direction.SW)} />\n    <NWResize onMouseDown={(e) => resize(e, Direction.NW)} />\n  </>\n);\n\nexport default ResizeBorder;\n","import React from 'react';\nimport styled from 'styled-components';\n\nexport const TitleBarButtonsThemeProperties = [\n  'TitleBarButtonsElement',\n  'WindowButton',\n  'MinimizeButton',\n  'MaximizeButton',\n  'UnmaximizeButton',\n  'CloseButton',\n] as const;\n\nexport interface TitleBarButtonsProps {\n  alwaysShowCloseButton: boolean;\n  close(): void;\n  isClosable: boolean;\n  isMaximizable: boolean;\n  isMaximized: boolean;\n  isMinimizable: boolean;\n  maximize(): void;\n  minimize(): void;\n  unmaximize(): void;\n}\n\nconst TitleBarButtonsElement = styled.div`\n  ${(props) => props.theme.window.TitleBarButtonsElement}\n`;\n\nconst WindowButton = styled.button`\n  ${(props) => props.theme.window.WindowButton}\n`;\nWindowButton.defaultProps = {\n  type: 'button',\n  tabIndex: -1,\n};\n\nconst MinimizeButton = styled(WindowButton)`\n  ${(props) => props.theme.window.MinimizeButton}\n`;\n\nconst MaximizeButton = styled(WindowButton)`\n  ${(props) => props.theme.window.MaximizeButton}\n`;\n\nconst UnmaximizeButton = styled(WindowButton)`\n  ${(props) => props.theme.window.UnmaximizeButton}\n`;\n\nconst CloseButton = styled(WindowButton)`\n  ${(props) => props.theme.window.CloseButton}\n`;\n\nconst TitleBarButtons = ({\n  alwaysShowCloseButton,\n  close,\n  isClosable,\n  isMaximizable,\n  isMaximized,\n  isMinimizable,\n  maximize,\n  minimize,\n  unmaximize,\n}: TitleBarButtonsProps) => (\n  <TitleBarButtonsElement>\n    {isMinimizable && <MinimizeButton onClick={minimize} />}\n    {isMaximizable &&\n      (isMaximized ? (\n        <UnmaximizeButton onClick={unmaximize} />\n      ) : (\n        <MaximizeButton onClick={maximize} />\n      ))}\n    {(isClosable || alwaysShowCloseButton) && (\n      <CloseButton onClick={close} disabled={!isClosable} />\n    )}\n  </TitleBarButtonsElement>\n);\nexport default TitleBarButtons;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport type { Icon } from '../../icons';\nimport { getIconFileForSize } from '../../icons/utils';\nimport { useThemeManager } from '../../themeManager/hooks';\nimport TitleBarButtons from './TitleBarButtons';\n\nexport const TitleBarThemeProperties = [\n  'TitleBarElement',\n  'TitleBarTitleContainer',\n  'TitleBarTitle',\n  'TitleBarIcon',\n] as const;\n\nexport interface TitleBarElementProps {\n  isActive: boolean;\n}\n\nconst TitleBarElement = styled.div<TitleBarElementProps>`\n  ${(props) => props.theme.window.TitleBarElement}\n`;\n\nconst TitleContainer = styled.div`\n  ${(props) => props.theme.window.TitleBarTitleContainer}\n`;\n\nconst TitleBarTitle = styled.div`\n  ${(props) => props.theme.window.TitleBarTitle}\n`;\n\nconst TitleBarIconElement = styled.img`\n  ${(props) => props.theme.window.TitleBarIcon}\n`;\n\nconst TitleBarIcon = ({ icon }: { icon: string | Icon }) => {\n  const { theme } = useThemeManager();\n\n  const resolvedIcon = typeof icon === 'string' ? theme.icons[icon] : icon;\n  if (!resolvedIcon) {\n    return null;\n  }\n\n  const iconFile = getIconFileForSize(resolvedIcon);\n  return <TitleBarIconElement src={iconFile} />;\n};\n\nexport interface TitleBarProps extends TitleBarElementProps {\n  close(): void;\n  drag(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\n  icon: Icon;\n  isClosable: boolean;\n  isMaximizable: boolean;\n  isMaximized: boolean;\n  isMinimizable: boolean;\n  maximize(): void;\n  minimize(): void;\n  alwaysShowCloseButton: boolean;\n  title: string;\n  unmaximize(): void;\n}\n\nconst TitleBar = ({\n  alwaysShowCloseButton,\n  close,\n  drag,\n  icon,\n  isActive,\n  isClosable,\n  isMaximizable,\n  isMaximized,\n  isMinimizable,\n  maximize,\n  minimize,\n  title,\n  unmaximize,\n}: TitleBarProps) => {\n  const onTitleDoubleClick = () => {\n    isMaximizable && (isMaximized ? unmaximize() : maximize());\n  };\n\n  return (\n    <TitleBarElement isActive={isActive}>\n      <TitleContainer onMouseDown={drag} onDoubleClick={onTitleDoubleClick}>\n        {icon !== undefined && <TitleBarIcon icon={icon} />}\n        <TitleBarTitle>{title}</TitleBarTitle>\n      </TitleContainer>\n      <TitleBarButtons\n        alwaysShowCloseButton={alwaysShowCloseButton}\n        close={close}\n        isClosable={isClosable}\n        isMaximizable={isMaximizable}\n        isMaximized={isMaximized}\n        isMinimizable={isMinimizable}\n        maximize={maximize}\n        minimize={minimize}\n        unmaximize={unmaximize}\n      />\n    </TitleBarElement>\n  );\n};\n\nexport default TitleBar;\n","import styled from 'styled-components';\n\nimport { ViewportMargins } from '../../windowManager/types';\n\nexport const WindowElementThemeProperties = ['WindowElement'] as const;\n\nexport interface WindowElementProps {\n  height: number;\n  width: number;\n  positionX: number;\n  positionY: number;\n  isMinimized: boolean;\n  isMaximized: boolean;\n  orderNumber: number;\n  viewportMargins: ViewportMargins;\n}\n\nconst WindowElement = styled.div.attrs((props: WindowElementProps) => ({\n  style: {\n    top: `${props.positionY}px`,\n    width: `${props.width}px`,\n    height: `${props.height}px`,\n    left: `${props.positionX}px`,\n    zIndex: props.orderNumber,\n  },\n}))<WindowElementProps>`\n  ${(props) => props.theme.window.WindowElement}\n`;\nexport default WindowElement;\n","import styled from 'styled-components';\n\nexport const WindowElementContentThemeProperties = [\n  'WindowElementContent',\n] as const;\n\nconst WindowElementContent = styled.div`\n  ${(props) => props.theme.window.WindowElementContent}\n`;\nexport default WindowElementContent;\n"],"names":[],"sourceRoot":""}